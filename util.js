export function removeWhiteSpaceExceptInQuotes(str) {
	let result = "";
	let inQuote = false;
	for (let i = 0; i < str.length; i++) {
		if (str[i] === '"' || str[i] === "'") {
			inQuote = !inQuote;
			result += str[i];
		} else if (!inQuote && /\s/.test(str[i])) {
			// ignore whitespace that is not inside a quote
			continue;
		} else {
			result += str[i];
		}
	}
	return result;
}

export function removeNewlinesAndExtraSpaces(str) {
	// Replace all newline characters with a space
	const stringWithoutNewlines = str.replace(/\n/g, ' ');

	// Replace all consecutive spaces that are two or more in a row with a single space
	const stringWithoutExtraSpaces = stringWithoutNewlines.replace(/ {2,}/g, ' ');

	return stringWithoutExtraSpaces;
}


export function createInitialPrompt(prompt) {
	return `You are an Appian SAIL interface generator. You are only allowed to use functions from this list of SAIL functions: {'a!httpFormPart', 'a!storedProcedureInput', 'supervisor', 'a!wsConfig', 'currency', 'a!addDateTime', 'a!customFieldConcat', 'harmean', 'usermonth', 'where', 'eomonth', 'gcd', 'bin2oct', 'rept', 'fact', 'a!applyComponents', 'lower', 'search', 'keyval', 'gmt', 'a!cmiGetProperties', 'a!queryEntity_18r3', 'stdev', 'xpathsnippet', 'reverse', 'a!isNullOrEmpty', 'a!customFieldMatch', 'a!dataSubset', 'a!entityData', 'numoverdueprocessesforprocessmodel', 'atan', 'acos', 'a!httpResponse_17r4', 'contains', 'a!latestHealthCheck', 'a!queryFilter', 'char', 'isnull', 'split', 'dec2oct', 'numprocessesforprocessmodelforstatus', 'userlocale', 'a!verifyRecaptcha', 'ceiling', 'a!update', 'exact', 'runtimetypeof', 'intervalds', 'toboolean', 'stripHtml', 'userdayofyear', 'toxml', 'oct2bin', 'floor', 'pound', 'sinh', 'userdaysinmonth', 'usertimezone', 'cosh', 'dollar', 'a!isNativeMobile', 'userdatetime', 'like', 'enumerate', 'code', 'proper', 'userdate', 'today', 'bind', 'a!groupMembers', 'topeople', 'getgroupattribute', 'oct2dec', 'a!httpQueryParameter', 'degrees', 'todecimal', 'toemailrecipient', 'a!iconNewsEvent', 'trim', 'dec2bin', 'rounddown', 'a!listtype', 'document', 'todocument', 'a!executeStoredProcedureForQuery', 'calisworkday', 'combin', 'sin', 'dayofyear', 'bin2dec', 'date', 'a!cmiCopyDocumentToAppianFolder', 'if', 'now', 'tostring', 'value', 'strip', 'all', 'a!cmiDelete', 'a!httpHeader', 'ln', 'workday', 'caladddays', 'max', 'a!forEach', 'a!cmiGetObjectIdByPath', 'month', 'a!distanceBetween', 'sqrtpi', 'todatetime', 'tointervalds', 'lookup', 'topaginginfo', 'a!customFieldDivide', 'a!wsUsernameTokenScs', 'trunc', 'a!testRunStatusForId', 'sum', 'a!queryColumn', 'userisleapyear', 'len', 'multinomial', 'group', 'a!customFieldCondition', 'a!sblInvokeWriter', 'folder', 'atanh', 'numoverduetasksforprocessmodel', 'extractanswers', 'a!relatedRecordData', 'yen', 'sumsq', 'insertkeyval', 'a!match', 'yearfrac', 'userweekday', 'reduce', 'a!toRecordIdentifier', 'a!queryLogicalExpression', 'a!queryAggregation', 'averagetaskcompletiontimeforprocessmodel', 'a!jsonPath', 'length', 'touser', 'a!entityDataIdentifiers', 'sqrt', 'difference', 'a!keys', 'stripwith', 'a!querySelection', 'cleanwith', 'pi', 'apply', 'a!groupsByName', 'a!cmiCopyDocumentFromAppian', 'odd', 'a!sapInvoke', 'index', 'a!queryAggregationColumn', 'left', 'roundup', 'charat', 'midb', 'a!wsHttpHeaderField', 'cents', 'int', 'a!doesGroupExist', 'toemailaddress', 'a!sblQuery', 'displayvalue', 'milli', 'a!subtractDateTime', 'a!iconIndicator', 'calworkhours', 'even', 'weeknum', 'hour', 'remove', 'mod', 'a!isusermemberofgroup', 'a!sblInvoke', 'todate', 'minute', 'padright', 'numontimeprocessesforprocessmodel', 'exp', 'load', 'a!customFieldMultiply', 'xpathdocument', 'merge', 'sign', 'a!docExtractionResult', 'lastndays', 'ispositiveinfinity', 'a!recordFilterList', 'userweeknum', 'second', 'a!cmiCreateFolder', 'insert', 'concat', 'a!sblCreate', 'todatasubset', 'webservicequery', 'caladdhours', 'cast', 'repeat', 'a!scsField', 'user', 'radians', 'webservicewrite', 'product', 'a!refreshVariable', 'factdouble', 'offsetFromGMT', 'infinity', 'totime', 'externalize', 'a!sortInfo', 'a!toJson_17r1', 'torecord', 'a!listViewItem', 'padleft', 'average', 'joinarray', 'a!localVariables', 'tan', 'a!recordFilterListOption', 'a!fromJson_19r2', 'calisworktime', 'searchb', 'cos', 'a!sblUpdateFieldValue', 'a!customFieldSum', 'power', 'median', 'numontimetasksforprocessmodel', 'weekday', 'a!customFieldDateDiff', 'toknowledgecenter', 'log', 'datetime', 'a!wsHttpCredentials', 'asinh', 'timezone', 'isInDaylightSavingTime', 'urlwithparameters', 'a!save', 'not', 'acosh', 'a!customFieldLogicalExpression', 'rdrop', 'property', 'euro', 'a!testRunResultForId', 'clean', 'rank', 'a!isNotNullOrEmpty', 'asin', 'with', 'a!customFieldDefaultValue', 'a!userRecordIdentifier', 'error', 'isnegativeinfinity', 'substitute', 'symmetricdifference', 'a!sapBapiParameters', 'timevalue', 'averagetasklagtimeforprocessmodel', 'resource', 'reject', 'useredate', 'day', 'replaceb', 'varp', 'a!groupsForUser', 'a!query', 'getdistinctusers', 'insertkey', 'a!sblDelete', 'a!aggregationFields', 'a!wsUsernameToken', 'tofolder', 'a!cmiCopyDocumentToAppian', 'isinfinite', 'bin2hex', 'a!recordFilterChoices', 'calworkdays', 'a!getDataSourceForPlugin', 'a!pagingInfo', 'fixed', 'hex2oct', 'upper', 'a!map', 'a!groupsByType', 'oct2hex', 'avedev', 'dec2hex', 'lcm', 'time', 'None', 'numtasksforprocessmodelforstatus', 'mode', 'choose', 'a!httpAuthenticationBasic', 'isleapyear', 'days360', 'a!deployment', 'nan', 'a!recordData', 'tointeger', 'a!swissFranc', 'a!recordFilterDateRange_20r2', 'a!urlForTask', 'quotient', 'tanh', 'isusernametaken', 'typename', 'internalize', 'a!userRecordFilterList_22r3', 'frequency', 'touniformstring', 'wherecontains', 'union', 'var', 'and', 'rand', 'min', 'filter', 'mid', 'round', 'a!integrationError', 'a!flatten', 'loggedInUser', 'useryear', 'community', 'a!queryRecordType_20r4', 'networkdays', 'text', 'a!queryProcessAnalytics', 'a!defaultValue', 'insertquestions', 'any', 'updatearray', 'soundex', 'a!cmiGetFolderChildren', 'count', 'datetext', 'or', 'togroup', 'tocommunity', 'datevalue', 'right', 'timezoneid', 'replace', 'hex2bin', 'averagetaskworktimeforprocessmodel', 'typeof', 'a!sentimentScore', 'daysinmonth', 'year', 'find', 'a!cmiGetRepoInfo', 'a!submitUploadedFiles', 'toHtml', 'local', 'stdevp', 'usereomonth', 'append', 'knowledgecenter', 'userdatevalue', 'extract', 'hex2dec', 'lenb', 'intersection', 'mround', 'a!docExtractionStatus', 'a!isPageWidth', 'userday', 'e', 'leftb', 'edate', 'urlforrecord', 'geomean', 'initials', 'a!userRecordListViewItem_22r3', 'abs', 'a!customFieldSubtract', 'ldrop', 'a!pickerFieldDocumentsAndFolders', 'a!gridLayoutHeaderCell', 'a!richTextListItem', 'a!cardTemplateBarTextJustified', 'a!processTaskLink', 'a!grouping', 'a!boxLayout', 'a!sideBySideItem', 'a!imageField_17r3', 'a!dynamicLink', 'a!billboardLayout_19r1', 'a!folderBrowserFieldColumns', 'a!reportLink', 'a!areaChartConfig', 'a!richTextHeader', 'a!pieChartConfig', 'a!gridLayout', 'a!sectionLayout_17r1', 'a!barChartConfig', 'a!webImage', 'a!cardLayout', 'a!documentImage', 'a!gaugeField', 'a!dropdownField_20r2', 'a!hierarchyBrowserFieldTreeNode', 'a!recordLink', 'a!tagField', 'a!documentAndFolderBrowserFieldColumns', 'a!pickerFieldRecords_20r2', 'a!pickerFieldUsersAndGroups', 'a!hierarchyBrowserFieldColumnsNode', 'a!videoField', 'a!textField', 'a!richTextImage', 'a!fileUploadField_17r1', 'a!columnChartField', 'a!colorSchemeCustom', 'a!safeLink', 'a!progressBarField', 'a!newsEntryLink', 'a!authorizationLink', 'a!recordActionItem', 'a!webVideo', 'a!milestoneField', 'a!documentViewerField', 'a!webContentField_deprecated', 'a!pieChartField', 'a!tagItem', 'a!lineChartConfig', 'a!radioButtonFieldByIndex', 'a!userRecordLink', 'a!richTextItem_18r1', 'a!userBrowserFieldColumns', 'a!headerContentLayout', 'a!orgChartField', 'a!recordActionField', 'a!integerField', 'a!hierarchyBrowserFieldColumns', 'a!gaugePercentage', 'a!pickerFieldCustom', 'a!cardChoiceField', 'a!userAndGroupBrowserFieldColumns', 'a!sideBySideLayout', 'a!gridField_19r1', 'a!formLayout_17r1', 'a!hierarchyBrowserFieldTree', 'a!gaugeFraction', 'a!documentBrowserFieldColumns_17r3', 'a!dropdownFieldByIndex_20r2', 'a!groupBrowserFieldColumns', 'a!multipleDropdownFieldByIndex_20r2', 'a!checkboxFieldByIndex', 'a!encryptedTextField', 'a!signatureField', 'a!documentDownloadLink', 'a!multipleDropdownField_20r2', 'a!buttonArrayLayout', 'a!richTextIcon', 'a!pickerFieldDocuments', 'a!columnLayout', 'a!barOverlay', 'a!timeDisplayField', 'a!floatingPointField', 'a!gridRowLayout', 'a!lineChartField_19r1', 'a!areaChartField', 'a!columnsLayout', 'a!pickerFieldUsers', 'a!cardTemplateTile', 'a!columnChartConfig', 'a!gaugeIcon', 'a!radioButtonField', 'a!startProcessLink', 'a!richTextBulletedList', 'a!richTextDisplayField', 'a!gridColumn', 'a!stampField', 'a!submitLink', 'a!buttonWidget', 'a!buttonLayout', 'a!pickerFieldFolders', 'a!richTextNumberedList', 'a!linkField', 'a!chartSeries', 'a!scatterChartField', 'a!measure', 'a!pickerFieldGroups', 'a!paragraphField', 'a!userImage', 'a!barcodeField', 'a!gridLayoutColumnConfig', 'a!dateTimeField', 'a!chartReferenceLine', 'a!barChartField_21r4', 'a!fullOverlay', 'a!cardTemplateBarTextStacked', 'a!dateField', 'a!checkboxField', 'a!columnOverlay'} Return the data in the following JSON format: {"functions": [<list of functions>]} and return nothing other than this JSON statement. Return proper JSON, do not describe what you are doing. What functions will you need to generate an interface based on the following prompt? Prompt: ${prompt}`

}
